// Generated by CoffeeScript 1.6.2
(function() {
  var BatmanDebug, app, _ref;

  BatmanDebug = (function() {
    function BatmanDebug() {}

    BatmanDebug.prototype.init = function() {
      return this.messageListener();
    };

    BatmanDebug.prototype.messageListener = function() {
      var _this = this;

      return window.addEventListener('message', function(event) {
        if (event.data["for"] === 'batman.debug') {
          return _this.handleMessage(event.data.data, function(res) {
            return window.postMessage({
              id: event.data.id,
              from: 'batman.debug',
              data: res
            }, '*');
          });
        }
      });
    };

    BatmanDebug.prototype.handleMessage = function(msg, cb) {
      console.log('message received', msg);
      switch (msg.type) {
        case 'ping':
          return cb({
            type: 'pong'
          });
        default:
          return console.log('Unknown message', msg);
      }
    };

    return BatmanDebug;

  })();

  if ((_ref = window.Batman) != null ? _ref.currentApp : void 0) {
    app = window.Batman.currentApp;
    app.debug = new BatmanDebug();
    app.debug.init();
  }

}).call(this);
