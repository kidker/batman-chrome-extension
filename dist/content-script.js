// Generated by CoffeeScript 1.6.2
(function() {
  var messageId, responseFunctions;

  messageId = 0;

  responseFunctions = {};

  window.addEventListener('message', function(event) {
    var sendResponse;

    console.log('content-script', event, responseFunctions);
    if (event.data.from === 'batman.debug') {
      sendResponse = responseFunctions[event.data.id];
      if (sendResponse) {
        sendResponse(event.data.data);
      }
      return delete responseFunctions[event.data.id];
    }
  });

  chrome.runtime.onMessage.addListener(function(request, sender, sendResponse) {
    var id;

    id = messageId++;
    responseFunctions[id] = sendResponse;
    window.postMessage({
      id: id,
      "for": 'batman.debug',
      data: request
    }, '*');
    return true;
  });

}).call(this);
